<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://ziqi-yang.github.io/blog_meow/scss/main.min.css></head><link rel=stylesheet href=https://ziqi-yang.github.io/blog_meow/scss/single.min.css><body><div id=nav-border><nav id=nav><a class=nav-link href=/blog_meow/>Home</a>
<a class=nav-link href=/blog_meow/tags/>Tags</a>
<a class=nav-link href=/blog_meow/archives/>Archives</a>
<a class=nav-link href=/blog_meow/about/>About me</a>
<a class=nav-link href=/blog_meow/index.xml>Rss</a></nav></div><div id=content><main><article><header><h1>rCore</h1></header><p>Based on <a href=https://learningos.github.io/rCore-Tutorial-Guide-2023S/index.html>rCore-Tutorial-Guide 2023 春季学期</a> and <a href=https://learningos.github.io/rCore-Tutorial-Book-v3/index.html>rCore-Tutorial-Book 第三版</a></p><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Useful Command</h2><div id=outline-text-headline-1 class=outline-text-2><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>To show platforms based on RISC-V that rustc supports</h3><div id=outline-text-headline-2 class=outline-text-3><div class="src src-shell"><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>rustc --print target-list | grep riscv</span></span></code></pre></td></tr></table></div></div></div></div></div></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>Rust Note</h2><div id=outline-text-headline-3 class=outline-text-2><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>Cross Build (RISC-V)</h3><div id=outline-text-headline-4 class=outline-text-3><p><code class=verbatim>.cargo/.config</code></p><div class="src src-config"><pre tabindex=0><code class=language-config data-lang=config>[build]
target = &#34;riscv64gc-unknown-none-elf&#34;</code></pre></div></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>No Std</h3><div id=outline-text-headline-5 class=outline-text-3><p>Besides <a href=https://learningos.github.io/rCore-Tutorial-Guide-2023S/chapter1/2remove-std.html>remove std section</a>, you can refer to <a href=https://docs.rust-embedded.org/embedonomicon/smallest-no-std.html>smallest no std - The Embedonomicon</a>.</p></div></div></div></div><div id=outline-container-headline-6 class=outline-2><h2 id=headline-6>Notes</h2><div id=outline-text-headline-6 class=outline-text-2><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Linker Script</h3><div id=outline-text-headline-7 class=outline-text-3><p>linker script specifications: <code>info ld Scripts</code> or you can read in Emacs(<code>C-h i</code>)</p></div></div></div></div><div id=outline-container-headline-8 class=outline-2><h2 id=headline-8>Toolings</h2><div id=outline-text-headline-8 class=outline-text-2><ol><li><code class=verbatim>strace</code></li><li><code class=verbatim>file</code> show file format</li><li><code class=verbatim>stat</code> show file/directory status (and size & blocks & Inode & … information)</li><li><code class=verbatim>readelf</code> ELF file information
<code>readelf -W -S &lt;executable></code> show all the sections of a executable (for instance, `.text`, `.data`)
(<code>rust-readobj --section-headers &lt;executable></code> can also show sections header information of a executable)</li><li><p><a href=https://github.com/rust-embedded/cargo-binutils>cargo-binutils</a> analysis binary
installation:</p><div class="src src-shell"><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cargo install cargo-binutils
</span></span><span style=display:flex><span>rustup component add llvm-tools-preview</span></span></code></pre></td></tr></table></div></div></div><ol><li>show the heading information of a executable file
<code>rust-readobj -h &lt;executable></code></li><li>reverse engineering of a executable file
<code>rust-objdump -S &lt;executable></code></li></ol></li></ol></div></div><div id=outline-container-headline-9 class=outline-2><h2 id=headline-9>Resources</h2><div id=outline-text-headline-9 class=outline-text-2><ol><li><a href=https://github.com/riscv-non-isa/riscv-sbi-doc/blob/master/riscv-sbi.adoc>rust sbi specification</a></li></ol></div></div></article><aside><nav id=TableOfContents><ul><li><a href=#headline-1>Useful Command</a><ul><li><a href=#headline-2>To show platforms based on RISC-V that rustc supports</a></li></ul></li><li><a href=#headline-3>Rust Note</a><ul><li><a href=#headline-4>Cross Build (RISC-V)</a></li><li><a href=#headline-5>No Std</a></li></ul></li><li><a href=#headline-6>Notes</a><ul><li><a href=#headline-7>Linker Script</a></li></ul></li><li><a href=#headline-8>Toolings</a></li><li><a href=#headline-9>Resources</a></li></ul></nav></aside></main></div><script src=/blog_meow/js/single.min.js></script></body></html>